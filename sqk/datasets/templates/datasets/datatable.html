<script>
/* Get the rows which are currently selected */
var oTable;
$(document).ready(function() {
  var last_column = {{ feature_names|length }} + {{ label_names|length }} + 2;
  var initial_display_length = 10;
  /* Add a click handler to the rows - this could be used as a callback */
  $("#dataset-table tbody tr").click( function( e ) {
    if ( $(this).hasClass('info') ) {
      $(this).removeClass('info');
    }
    else {
      oTable.$('tr.info').removeClass('info');
      $(this).addClass('info');
    }
  });

  /* Add a click handler for the delete row */
  $('#delete').click( function() {
    var anSelected = fnGetSelected( oTable );
    if ( anSelected.length !== 0 ) {
      oTable.fnDeleteRow( anSelected[0] );
    }
  } );

    // Intialize dataset as a DataTable
    oTable = $('#dataset-table').dataTable( {
      "iDisplayLength": initial_display_length,
      "iDisplayStart": {{ data|length }} - initial_display_length, // Start on last page
      "bFilter": false, // Disable search
      "aoColumnDefs": [
          // Last column should not be sortable
          { 'bSortable': false, 'aTargets': [ last_column ] }
          ]
        } );
  });
function fnGetSelected( oTableLocal )
{
  try {
    return oTableLocal.$('tr.info');
  } catch(ex){
    alert('something went wrong when trying to select a row');
  }

}
</script>