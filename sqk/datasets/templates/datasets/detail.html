{% extends "base.html" %}
{% load dataset_tags %}
{% load url from future %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% block page_title %}{{ dataset.name }}{% endblock page_title %}
{% block static %}
<!-- DataTables.net -->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}datatables/media/css/jquery.dataTables.css">
<script type="text/javascript" src='{{ STATIC_URL }}datatables/media/js/jquery.dataTables.min.js'></script>
<!-- TableTools -->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}datatables/extras/TableTools/media/css/TableTools.css">
<script type="text/javascript" src='{{ STATIC_URL }}datatables/extras/TableTools/media/js/TableTools.min.js'></script>
<!-- Column Filter Widgets -->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}datatables/extras/ColumnFilter/media/css/ColumnFilterWidgets.css">
<script type="text/javascript" src='{{ STATIC_URL }}datatables/extras/ColumnFilter/media/js/ColumnFilterWidgets.js'></script>

<!-- DataTables.net Bootstrap integration -->
<script type="text/javascript" src="{{ STATIC_URL }}js/dataTables.bootstrap.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/dataTables.bootstrap.css">
{% endblock static %}
{% block content %}

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      {% include "datasets/sidebar.html" %}
    </div><!-- end span3 -->

    <div class="span9">

      <h1 class="page-title">
        <a href="#" id="dataset_name">{{ dataset.name }}</a>
      </h1>

      {# Dataset control buttons #}
      <div class="row-fluid">
        <div class="span12">
          <div class="btn-toolbar">
            <div class="pull-right">
              <a href="{% url 'datasets:edit' dataset.pk %}" class="btn btn-primary"><i class="icon-pencil"></i> Edit</a>

              <a id="delete_dataset_{{ dataset.pk }}" href="#delete_dataset_{{ dataset.pk }}_confirm" data-id="{{ dataset.pk }}" class="delete-confirm btn btn-danger"><i class="icon-trash icon-white"></i></a>
            </div>
          </div><!-- end btn-toolbar -->
        </div><!-- end span12 -->
      </div><!-- end Dataset row-fluid-->

      {# Information block #}
      <div class="row-fluid">
        <div class="block span12">
          <div class="block-heading" data-toggle="collapse" href="#info">Information</div>
          <div id="info" class="collapse in">
            <table class="table">
              <tbody>
                <tr>
                  <th>Description</th>
                  <td><a href="#" id="dataset_description">{{ dataset.description }}</a></td>
                </tr>
                <tr>
                  <th>Species</th>
                  <td class="species"><a href="#" id="dataset_species">{{ dataset.species }}</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div><!-- end Information row-fluid-->

      {# Visualization #}
      <div class="row-fluid">
        {# Visualization panel #}
        <div class="span12">
          <div class="block">
            <div id="visualization" class="block-heading" data-toggle="collapse" href="#chart">
              Visualization
            </div>
            <div id="chart" class="collapse out"></div>
          </div>
        </div>
      </div><!-- end row-fluid -->

        {# Data table #}
        <div class="row-fluid">
          {% include "datasets/show_dataset.html" %}
        </div><!-- end row-fluid -->
        <div class="row-fluid">
          <div class="span12">
            {% crispy upload_form %}
          </div>
        </div>
      </div>
    </div>
  </div>
  {# Include visualization script #}
  {% include "datasets/visualization.html" %}
  {# Include script to initialize DataTable #}
  {% include "datasets/datatable.html" %}
  {# Include modal confirm dialogs #}
  {% include "datasets/confirm_delete_dataset.html" %}
  {# Include script to make fields editable #}
  {% include "datasets/dataset-editable.html" %}
  {% endblock content %}