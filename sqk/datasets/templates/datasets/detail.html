{% extends "base.html" %}
{% load dataset_tags %}
{% load url from future %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% block page_title %}sepal | {{ dataset.name }}{% endblock page_title %}
{# Include DataTables base css and jss and plugins #}
{% block static %}
{% include "datasets/datatables_static.html" %}
{% include "base/soundmanager_static.html" %}
{% include "uploader/multipleuploader_style.html" %}
<script>
// create a JS Dataset object so that the Django context variables can
// be accessed from external JS files
var Dataset = {
  'id': {{ dataset.pk }},
  'updateVisualizationUrl': "{% url 'datasets:update_visualization' dataset.pk %}"
}
</script>
{% endblock static %}

{% block content %}
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      {% include "datasets/sidebar.html" %}
    </div><!-- end span3 -->

    <div class="span10">
      {# Dataset control buttons #}
          <div class="btn-toolbar ">
            <div class="pull-right">
              <a id="delete_dataset_{{ dataset.pk }}" href="#delete_dataset_{{ dataset.pk }}_confirm" data-id="{{ dataset.pk }}" class="delete-confirm btn btn-danger"><i class="icon-remove icon-white"></i></a>
            </div>
          </div><!-- end btn-toolbar -->
      <h2 class="page-title">
        <a href="#" id="dataset_name">{{ dataset.name }}</a>
      </h2>


      {# Information block #}
      <div class="row-fluid">
        <div class="block span12">
          <div class="block-heading" data-toggle="collapse" href="#info">Information</div>
          <div id="info" class="collapse in">
            <table class="table">
              <tbody>
                <tr>
                  <th>Description</th>
                  <td><a href="#" id="dataset_description">{{ dataset.description }}</a></td>
                </tr>
                <tr>
                  <th>Species</th>
                  <td class="species"><a href="#" id="dataset_species">{{ dataset.species }}</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div><!-- end Information row-fluid-->

      {# Visualization #}
      <div class="row-fluid">
        {# Visualization panel #}
        <div id="visualization" class="span5">
          <div class="block">
            <div id="visualization-heading" class="block-heading" data-toggle="collapse" href="#chart">
              Figure
            </div>
            <div id="chart" class="collapse in"></div>
          </div>
        </div><!-- end span4 -->
        {# Data table #}
        <div id="dataset" class="span7">
          {% include "datasets/show_dataset.html" %}
        </div><!-- end span8 -->
      </div><!-- end row-fluid -->

      <div class="row-fluid">
        <div class="span12">
          {# {% crispy upload_form %} #}
        </div>
      </div><!-- end row-fluid -->

      <div class="row-fluid">
        <div class="span12">{% include "uploader/upload_form.html" %}</div>
      </div>
    </div>
  </div>
</div>

{# Include visualization script #}
<script src='{{ STATIC_URL }}js/visualization.js'></script>
{# Include script to initialize DataTable #}
{% include "datasets/datatable_init.html" %}
{# Include modal confirm dialogs #}
{% include "datasets/confirm_delete_dataset.html" %}
{# Include script to make fields editable #}
{% include "datasets/dataset_editable.html" %}
{% include "uploader/multipleuploader_js.html" %}

{% endblock content %}