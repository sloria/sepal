{% extends "base.html" %}
{% load dataset_tags %}
{% load url from future %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% block static %}
<!-- DataTables.net -->
<script type="text/javascript" src='{{ STATIC_URL }}datatables/media/js/jquery.dataTables.min.js'></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}datatables/media/css/jquery.dataTables.css">
<!-- DataTables.net Bootstrap integration -->
<script type="text/javascript" src="{{ STATIC_URL }}js/dataTables.bootstrap.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/dataTables.bootstrap.css">
{% endblock static %}
{% block content %}

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      {% include "datasets/sidebar.html" %}
    </div><!-- end span3 -->

    <div class="span9">

      <h1 class="page-title">
        <a href="#" id="dataset_name">{{ dataset.name }}</a>
      </h1>

      <script>
      $('#dataset_name').editable({
       type: 'text',
       pk: {{ dataset.pk }},
       url: '{% url 'datasets:update_name' dataset.pk %}',
       title: 'Edit dataset name'
     });
      </script>

      {# Dataset control buttons #}
      <div class="row-fluid">
        <div class="span12">
          <div class="btn-toolbar">
            <div class="pull-right">
              <a href="{% url 'datasets:edit' dataset.pk %}" class="btn btn-primary"><i class="icon-pencil"></i> Edit</a>

              <a id="delete_dataset_{{ dataset.pk }}" href="#delete_dataset_{{ dataset.pk }}_confirm" data-id="{{ dataset.pk }}" class="delete-confirm btn btn-danger"><i class="icon-trash icon-white"></i></a>
            </div>
          </div><!-- end btn-toolbar -->
        </div><!-- end span12 -->
      </div><!-- end row-fluid-->





      <div class="row-fluid">
        <div class="block span12">
          <div class="block-heading" data-toggle="collapse" href="#info">Information</div>
          <div id="info" class="collapse in">
            <table class="table">
              <tbody>
                <tr>
                  <th>Description</th>
                  <td><a href="#" id="dataset_description">{{ dataset.description }}</a></td>
                </tr>
                <tr>
                  <th>Species</th>
                  <td><em><a href="#" id="dataset_species">{{ dataset.species }}</a></em></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div><!-- end Information row-fluid-->

      <script>
      $('#dataset_description').editable({
       type: 'textarea',
       pk: {{ dataset.pk }},
       url: '{% url 'datasets:update_description' dataset.pk %}',
       title: 'Edit dataset description'
     });

      $('#dataset_species').editable({
       type: 'text',
       pk: {{ dataset.pk }},
       url: '{% url 'datasets:update_species' dataset.pk %}',
       title: 'Edit dataset species'
     });
      </script>


      {# Visualization and Control #}
      <div class="row-fluid">
        {# Visualization panel #}
        <div class="span12">
          <div class="block">
            <div id="visualization" class="block-heading" data-toggle="collapse" href="#chart">
              Visualization</div>
              <div id="chart" class="collapse out"></div>
            </div>
          </div>
          {# Axes control #}

      {% comment %}
        <div class="span3">
        <div class="span3">
          <center>
            <div class="block block-heading" data-toggle="collapse" href="#control">Axes</div>
            <div id="control" class="collapse out">
              <div class="btn-group btn-group-vertical" data-toggle="buttons-checkbox" style="margin-top:25px">
                {% for feature in feature_objects %}
                <button type="button" class="btn btn-primary feature-btn" value="{{ forloop.counter0 }}">
                  {% if feature.name == 'zcr' %}
                  {{ feature.name|upper }}
                  {% else %}
                  {{ feature.name|capfirst }}
                  {% endif %}
                </button>
                {% endfor %}
              </div>
            </div>
          </center>
        </div>
      </div><!--end span3 -->
      {% endcomment %}
    </div><!-- end row-fluid -->
    <form action="{% url 'datasets:delete_instances' dataset.pk  %}" id="select_instances" method="post">{% csrf_token %}
      <div class="row-fluid">
        <div class="span12">
<a id="delete_instances" href="#delete_instances_confirm" data-id="{{ dataset.pk }}" class="delete-confirm btn"><i class="icon-remove"></i> Delete selected instances</a>
      </div>
    </div>



    <div class="row-fluid">
      {% include "datasets/show_dataset.html" %}
    </div>
  </form>

  <div class="row-fluid">
    <div class="span12">
      {% crispy upload_form %}
    </div>
  </div>
  {% include "datasets/visualization.html" %}
  {% include "datasets/datatable.html" %}
  {% include "datasets/confirm_delete_dataset.html" %}
  {% include "datasets/confirm_delete_instances.html" %}
</div>
</div>
</div>
{% endblock content %}