{% extends "base.html" %}
{% load url from future %}
{% block content %}
<div class="container">
  <h1 class="page-title center">Datasets</h1>
  <div class="btn-toolbar">

    {% if user.is_authenticated %}
    <a href="{% url 'datasets:create' %}" data-toggle="modal" class="btn btn-blue">
      <i class="icon-plus"></i>
      Create Dataset
    </a>
    {% else %}
    <p>You need an account to create a dataset. Go to the home page to request an account.</p>
        <a href="{% url 'datasets:create' %}" data-toggle="modal" class="btn btn-blue">
      Home
    </a>
    {% endif %}
    <div class="btn-group">
    </div>
  </div>
  <div class="well">
    {% if all_datasets %}
    <table class="table">
      <thead>
        <tr>
          <th>Dataset</th>
          <th>Description</th>
          <th>Species</th>
          <th>Date Created</th>
        </tr>
      </thead>
      {% for dataset in all_datasets %}
      <tr>
        <td><a href="{{ dataset.pk }}">
          <i class="icon-table"></i>
          {{ dataset.name }}</a>
        </td>
        <td>{{ dataset.description }}</td>
        <td class="species">{{ dataset.species }}</td>
        <td>{{ dataset.created_at }}</td>
        <td>
          <a href="{% url 'datasets:edit' dataset.pk %}" class="edit"><i class="icon-pencil"></i></a>
{#           <a href="{% url 'datasets:delete_dataset' dataset.pk %}" role="button"><i class="icon-remove"></i></a> #}
          <a id="delete_dataset_{{ dataset.pk }}" href="#delete_dataset_{{ dataset.pk }}_confirm" data-id="{{ dataset.pk }}"><i class="icon-remove"></i></a>
        </td>
      {% include "datasets/confirm_delete_dataset.html" %}
      </tr>
      {% endfor %}
    </table>
    {% else %}
    <h3 class="center"><em>No datasets available.</em></h3>
    {% endif %}
  </div>{# end div.well #}
</div>
{% endblock content %}